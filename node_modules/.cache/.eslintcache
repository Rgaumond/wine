[{"C:\\Users\\Richard\\www\\wine\\src\\index.js":"1","C:\\Users\\Richard\\www\\wine\\src\\reportWebVitals.js":"2","C:\\Users\\Richard\\www\\wine\\src\\components\\Hero\\HeroSection.jsx":"3","C:\\Users\\Richard\\www\\wine\\src\\components\\Header\\Navbar.jsx":"4","C:\\Users\\Richard\\www\\wine\\src\\App.js":"5","C:\\Users\\Richard\\www\\wine\\src\\components\\CaptureWine\\Capture.jsx":"6","C:\\Users\\Richard\\www\\wine\\src\\components\\Lists\\WineList.jsx":"7","C:\\Users\\Richard\\www\\wine\\src\\components\\Cellars\\Cellar.jsx":"8","C:\\Users\\Richard\\www\\wine\\src\\components\\Form\\Select.jsx":"9","C:\\Users\\Richard\\www\\wine\\src\\components\\Form\\Input.jsx":"10","C:\\Users\\Richard\\www\\wine\\src\\components\\Modals\\WineListModal.jsx":"11"},{"size":702,"mtime":1678634178805,"results":"12","hashOfConfig":"13"},{"size":375,"mtime":1678634178806,"results":"14","hashOfConfig":"13"},{"size":125,"mtime":1678634178800,"results":"15","hashOfConfig":"13"},{"size":1641,"mtime":1678634178799,"results":"16","hashOfConfig":"13"},{"size":1035,"mtime":1678634178787,"results":"17","hashOfConfig":"13"},{"size":7634,"mtime":1679759126310,"results":"18","hashOfConfig":"13"},{"size":3455,"mtime":1678634178802,"results":"19","hashOfConfig":"13"},{"size":9774,"mtime":1678634178793,"results":"20","hashOfConfig":"13"},{"size":2227,"mtime":1679759126311,"results":"21","hashOfConfig":"13"},{"size":1834,"mtime":1678634178795,"results":"22","hashOfConfig":"13"},{"size":6994,"mtime":1678634178804,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},"9ehq5m",{"filePath":"28","messages":"29","suppressedMessages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"27"},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"27"},{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"27"},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"27"},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"55","messages":"56","suppressedMessages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"27"},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"27"},"C:\\Users\\Richard\\www\\wine\\src\\index.js",[],[],[],"C:\\Users\\Richard\\www\\wine\\src\\reportWebVitals.js",[],[],"C:\\Users\\Richard\\www\\wine\\src\\components\\Hero\\HeroSection.jsx",[],[],"C:\\Users\\Richard\\www\\wine\\src\\components\\Header\\Navbar.jsx",["63"],[],"import React, { useState } from \"react\";\r\nimport \"./Navbar.css\";\r\n\r\nconst Navbar = () => {\r\n  // to change burger classes\r\n  const [burger_class, setBurgerClass] = useState(\"burger-bar unclicked\");\r\n  const [menu_class, setMenuClass] = useState(\"menu hidden\");\r\n  const [isMenuClicked, setIsMenuClicked] = useState(false);\r\n\r\n  // toggle burger menu change\r\n  const updateMenu = () => {\r\n    if (!isMenuClicked) {\r\n      setBurgerClass(\"burger-bar clicked\");\r\n      setMenuClass(\"menu visible\");\r\n    } else {\r\n      setBurgerClass(\"burger-bar unclicked\");\r\n      setMenuClass(\"menu hidden\");\r\n    }\r\n    setIsMenuClicked(!isMenuClicked);\r\n  };\r\n\r\n  const forward = (target) => {\r\n    //if (target === \"cellar\") window.location.href = \"/cellar\";\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"burger-logo\">VinoVeritas</div>\r\n      <nav>\r\n        <div className=\"burger-menu\" onClick={updateMenu}>\r\n          <div className={burger_class}></div>\r\n          <div className={burger_class}></div>\r\n          <div className={burger_class}></div>\r\n        </div>\r\n      </nav>\r\n      <div className={menu_class}>\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => (window.location.href = \"../\")}\r\n        >\r\n          Liste\r\n        </div>\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => (window.location.href = \"../cellar\")}\r\n        >\r\n          Cellier\r\n        </div>\r\n        <div\r\n          className=\"menu-item\"\r\n          onClick={() => (window.location.href = \"../capture\")}\r\n        >\r\n          Ajouter\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","C:\\Users\\Richard\\www\\wine\\src\\App.js",[],[],"C:\\Users\\Richard\\www\\wine\\src\\components\\CaptureWine\\Capture.jsx",["64"],[],"C:\\Users\\Richard\\www\\wine\\src\\components\\Lists\\WineList.jsx",["65","66"],[],"import React, { useState, useEffect } from \"react\";\r\nimport Input from \"../Form/Input\";\r\nimport Select from \"../Form/Select\";\r\n\r\n//type WineObj = { id_: String, name: string }[];\r\n// const groups = [\r\n//   { id_: 0, name: \"Rouge\" },\r\n//   { id_: 1, name: \"Blanc\" },\r\n//   { id_: 2, name: \"Rosé\" },\r\n//   { id_: 3, name: \"Mousseux\" },\r\n//   { id_: 4, name: \"Champagne\" },\r\n//   { id_: 4, name: \"All\" },\r\n// ];\r\n\r\nconst WineList = (props) => {\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [wines, setWines] = useState([]);\r\n  const [wineGroup, setWineGroup] = React.useState(\"All\");\r\n  const [dataIsReturned, setDataReturned] = useState(false);\r\n  const [group, setGroup] = useState(\"All\");\r\n\r\n  const handleInputChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  const sortByMillesime = (wines) => {\r\n    //if (params.wineid)\r\n    const filtered = wines.filter(inStock);\r\n\r\n    filtered.sort((a, b) => (a.millesime > b.millesime ? 1 : -1));\r\n    return filtered;\r\n  };\r\n\r\n  const inStock = (wines) => {\r\n    return wines.qty > 0;\r\n  };\r\n\r\n  const filteredWine = wines.filter((wine) => {\r\n    if (searchValue === \"\") {\r\n      if (wineGroup === \"All\") return wine;\r\n      else if (wine.group === wineGroup) return wine;\r\n    } else {\r\n      if (\r\n        wine.name.toLowerCase().includes(searchValue.toLowerCase()) &&\r\n        wine.group === wineGroup\r\n      )\r\n        return wine;\r\n    }\r\n  });\r\n\r\n  const fetchData = () => {\r\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setWines(sortByMillesime(data.obj));\r\n        setDataReturned(true);\r\n      });\r\n  };\r\n\r\n  const filterRed = (e) => {\r\n    setWineGroup(e.target.value);\r\n    // setGroup(e.target.value);\r\n    setSearchValue(searchValue);\r\n    setGroup(e.target.value);\r\n  };\r\n\r\n  const editWine = (id) => {\r\n    window.location.href = \"./Capture/\" + id;\r\n  };\r\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (dataIsReturned) {\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff \",\r\n            position: \"sticky \",\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{ display: \"flex\", flexGrow: 1, backgroundColor: \"#fff \" }}\r\n          >\r\n            <Input\r\n              id=\"wineName\"\r\n              message=\"Nom du vin\"\r\n              label=\"\"\r\n              hasLabel=\"false\"\r\n              handleChange={handleInputChange}\r\n            ></Input>\r\n          </div>\r\n          <div style={{ display: \"flex\", right: 0 }}>\r\n            <Select\r\n              handleChange={filterRed}\r\n              defaultValue={group}\r\n              list=\"type\"\r\n              name=\"Type\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {filteredWine.map((wine) => {\r\n          return (\r\n            <div\r\n              className={\"list-item-container\"}\r\n              onClick={() => {\r\n                editWine(wine._id);\r\n              }}\r\n            >\r\n              <div className={\"\"}>\r\n                {wine.name} {wine.millesime} ({wine.qty})\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default WineList;\r\n","C:\\Users\\Richard\\www\\wine\\src\\components\\Cellars\\Cellar.jsx",["67","68","69","70","71","72","73","74","75"],[],"import React, { useState, useEffect } from \"react\";\r\nimport WineListModal from \"../Modals/WineListModal\";\r\nimport styles from \"./location.css\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst Cellar = () => {\r\n  const [locations, setlocations] = useState([]);\r\n\r\n  const [locationId, setlocationId] = useState();\r\n  const [locationArray, setlocationArray] = useState([]);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [wineId, setWineId] = React.useState(\"\");\r\n  const [currentWine, setCurrentWine] = React.useState(\"\");\r\n  const params = useParams();\r\n  const [cellarEmptyCellCount, setCellarEmptyCellCount] = useState(0);\r\n  const [kitchenEmptyCellCount, setKitchenEmptyCellCount] = useState(0);\r\n  const [cellarCellCount, setCellarCellCount] = useState(0);\r\n  const [kitchenCellCount, setKitchenCellCount] = useState(0);\r\n  const [fridgeCellCount, setFridgeCellCount] = useState(0);\r\n\r\n  let center_counter = 0;\r\n  // const handleChange = (e) => {\r\n  //   handleChange(e);\r\n  // };\r\n  let selectedLocations = [];\r\n  const handleClick = (locationid, wineid, winename) => {\r\n    if (!wineid) {\r\n      document.getElementById(\"footerContainer\").style.display = \"flex\";\r\n      document.getElementById(locationid).style.backgroundColor =\r\n        \"rgb(14, 223, 243)\";\r\n      if (!selectedLocations.includes(locationid))\r\n        selectedLocations.push(locationid);\r\n    } else {\r\n      setlocationId(locationid);\r\n      setWineId(wineid);\r\n      setCurrentWine(winename);\r\n      setOpen(true);\r\n    }\r\n  };\r\n\r\n  const placeWine = () => {\r\n    setlocationArray(selectedLocations);\r\n    setOpen(true);\r\n  };\r\n\r\n  const refresh = () => {\r\n    window.location.reload();\r\n  };\r\n  const fetchData = () => {\r\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/locations\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setWineCount(data.locations);\r\n        setlocations(data.locations);\r\n      });\r\n  };\r\n  const setWineCount = (data) => {\r\n    let cellarCounter = 0;\r\n    let kitchenCounter = 0;\r\n    let fridgeCounter = 0;\r\n    let cellarEmptyCounter = 0;\r\n    let kitchenEmptyCounter = 0;\r\n    data.forEach(function (item, index) {\r\n      if (item.wineid === \"\") {\r\n        if (item._id.startsWith(\"c\")) {\r\n          cellarEmptyCounter++;\r\n        } else if (item._id.startsWith(\"k\")) {\r\n          kitchenEmptyCounter++;\r\n        }\r\n      }\r\n      if (item._id.startsWith(\"c\")) {\r\n        cellarCounter++;\r\n      } else if (item._id.startsWith(\"k\")) {\r\n        kitchenCounter++;\r\n      }\r\n      if (item._id.startsWith(\"f\") && item.wineid !== \"\") {\r\n        fridgeCounter++;\r\n      }\r\n    });\r\n    setKitchenEmptyCellCount(kitchenEmptyCounter);\r\n    setCellarEmptyCellCount(cellarEmptyCounter);\r\n    setKitchenCellCount(kitchenCounter);\r\n    setCellarCellCount(cellarCounter);\r\n    setFridgeCellCount(fridgeCounter);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const setColor = (color, wineID) => {\r\n    if (wineID === params.wineid)\r\n      return <div className=\"redBottleWine blueBottleWine\"></div>;\r\n    else {\r\n      if (color === \"Rouge\") return <div className=\"redBottleWine\"></div>;\r\n      else if (color === \"Blanc\" || color === \"Mousseux\")\r\n        return <div className=\"redBottleWine whiteBottleWine\"></div>;\r\n      else return <div className=\"redBottleWine noBottleWine\"></div>;\r\n    }\r\n  };\r\n\r\n  const setColorShelves = (color, wineID) => {\r\n    if (wineID === params.wineid)\r\n      return (\r\n        <div className=\"redBottleWine blueBottleWine c_shelve_rotate \"></div>\r\n      );\r\n    else {\r\n      if (color === \"Rouge\")\r\n        return <div className=\"redBottleWine c_shelve_rotate \"></div>;\r\n      else if (color === \"Blanc\" || color === \"Mousseux\")\r\n        return (\r\n          <div className=\"redBottleWine whiteBottleWine c_shelve_rotate \"></div>\r\n        );\r\n      else\r\n        return (\r\n          <div className=\"redBottleWine noBottleWine c_shelve_rotate \"></div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const setOctagonColor = (color) => {\r\n    if (color === \"Rouge\") return <div class=\"circleRed\"></div>;\r\n    else if (color === \"Blanc\") return <div class=\"circleWhite\"></div>;\r\n    else return <div class=\"circleTransparent\"></div>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"main_container\">\r\n      <WineListModal\r\n        open={open}\r\n        wineid={wineId}\r\n        locationid={locationId}\r\n        currentwine={currentWine}\r\n        locationArray={locationArray}\r\n        setOpen={setOpen}\r\n      />\r\n      <div class=\"section_container\">\r\n        <div>\r\n          Cellier contient:{cellarCellCount - cellarEmptyCellCount - 2} libre:\r\n          {cellarEmptyCellCount - 1}\r\n        </div>\r\n        <div class=\"cellar_container\">\r\n          <div className=\"c_column\">\r\n            {locations.map((loc) => {\r\n              let style = \"c_wineRack\";\r\n\r\n              if (loc._id.startsWith(\"ca\")) {\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    {setColor(loc.winegroup, loc.wineid)}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n          <div className=\"c_column\">\r\n            {locations.map((loc) => {\r\n              let style = \"c_wineRack\";\r\n              if (loc._id.startsWith(\"cb\")) {\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    {setColor(loc.winegroup, loc.wineid)}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n          <div className=\"c_center\">\r\n            {locations.map((loc) => {\r\n              let style = \"c_shelves\";\r\n\r\n              if (loc._id.startsWith(\"cc\")) {\r\n                if (center_counter > 0) style = \"c_shelves c_shelve_border\";\r\n                center_counter++;\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    {setColorShelves(loc.winegroup, loc.wineid)}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n          <div className=\"c_column\">\r\n            {locations.map((loc) => {\r\n              let style = \"c_wineRack\";\r\n              if (loc._id.startsWith(\"cd\")) {\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    {setColor(loc.winegroup, loc.wineid)}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n          <div className=\"c_column\">\r\n            {locations.map((loc) => {\r\n              if (loc._id.startsWith(\"ce\")) {\r\n                let style = \"c_wineRack\";\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    {setColor(loc.winegroup, loc.wineid)}\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div class=\"section_container\">\r\n          <div class=\"section_title\">\r\n            Cuisine contient:\r\n            {kitchenEmptyCellCount - kitchenCellCount} libre:{kitchenCellCount}\r\n          </div>\r\n          <div class=\"kitchen_cellar_container\">\r\n            {locations.map((loc) => {\r\n              let style = \"octagon\";\r\n              if (loc._id.startsWith(\"kc\")) {\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    <div>{setOctagonColor(loc.winegroup)}</div>\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div class=\"section_container\">\r\n          <div class=\"section_title\">\r\n            Réfrigérateur contient:{fridgeCellCount}\r\n          </div>\r\n          <div class=\"fridge_cellar_container\">\r\n            {locations.map((loc) => {\r\n              let style = \"octagon\";\r\n              if (loc._id.startsWith(\"fa\")) {\r\n                return (\r\n                  <div\r\n                    className={style}\r\n                    id={loc._id}\r\n                    onClick={() => {\r\n                      handleClick(loc._id, loc.wineid, loc.winename);\r\n                    }}\r\n                  >\r\n                    <div>{setOctagonColor(loc.winegroup)}</div>\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div id=\"footerContainer\">\r\n        <div class=\"footerButtonReset\" onClick={refresh}>\r\n          Effacer\r\n        </div>\r\n        <div class=\"footerButtonAdd\" onClick={placeWine}>\r\n          Ajouter\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Cellar;\r\n","C:\\Users\\Richard\\www\\wine\\src\\components\\Form\\Select.jsx",["76","77"],[],"C:\\Users\\Richard\\www\\wine\\src\\components\\Form\\Input.jsx",["78","79","80","81"],[],"import React, { useState, useEffect } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport \"../../index.css\";\r\n\r\nconst Input = (props) => {\r\n  const [input, setInput] = useState(props.name);\r\n\r\n  let handleChange = (e) => {\r\n    setInput(e.target.value);\r\n    props.handleChange(e);\r\n  };\r\n\r\n  let handleClear = () => {\r\n    setInput(\"\");\r\n    let e = { target: {} };\r\n    e.target.value = \"\";\r\n    e.target.name = props.name;\r\n    props.handleChange(e);\r\n  };\r\n\r\n  let handlePlus = () => {\r\n    let theQty = parseInt(input);\r\n    theQty++;\r\n    console.log(\"input\" + theQty);\r\n    setInput(theQty);\r\n    let e = { target: {} };\r\n    e.target.value = theQty;\r\n    e.target.name = props.name;\r\n    props.handleChange(e);\r\n  };\r\n\r\n  let handleRemove = () => {\r\n    let theQty = parseInt(input);\r\n    if (theQty > 0) theQty--;\r\n    console.log(\"input\" + theQty);\r\n    setInput(theQty);\r\n    let e = { target: {} };\r\n    e.target.value = theQty;\r\n    e.target.name = props.name;\r\n    props.handleChange(e);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.value || props.value === 0) setInput(props.value);\r\n    else setInput(\"\");\r\n  }, []);\r\n\r\n  if (props.label !== \"\") {\r\n    return (\r\n      <>\r\n        <Form.Label>{props.label}</Form.Label>\r\n        <Form.Control\r\n          name={props.name}\r\n          type={props.type}\r\n          className={props.cssstyle}\r\n          id={props.id}\r\n          placeholder=\"\"\r\n          onChange={handleChange}\r\n          value={props.defaultValue || \"\"}\r\n        />\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        <Form.Control\r\n          name={props.name}\r\n          type={props.type}\r\n          className={props.cssstyle}\r\n          id={props.id}\r\n          placeholder=\"\"\r\n          onChange={handleChange}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Input;\r\n","C:\\Users\\Richard\\www\\wine\\src\\components\\Modals\\WineListModal.jsx",["82","83"],[],"import React, { useState, useEffect } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Input from \"../Form/Input\";\r\nimport Select from \"../Form/Select\";\r\n\r\nconst WineDetail = (props) => {\r\n  const [wines, setWines] = useState([]);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [wineGroup, setWineGroup] = React.useState(\"All\");\r\n  const [group, setGroup] = useState(\"All\");\r\n\r\n  //const handleOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setSearchValue(\"\");\r\n\r\n    props.setOpen(false);\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  const filterRed = (e) => {\r\n    setWineGroup(e.target.value);\r\n    // setGroup(e.target.value);\r\n    setSearchValue(searchValue);\r\n    setGroup(e.target.value);\r\n  };\r\n\r\n  const filteredWine = wines.filter((wine) => {\r\n    if (searchValue === \"\") {\r\n      if (wineGroup === \"All\") return wine;\r\n      else if (wine.group === wineGroup) return wine;\r\n    } else {\r\n      if (\r\n        wine.name.toLowerCase().includes(searchValue.toLowerCase()) &&\r\n        wine.group === wineGroup\r\n      )\r\n        return wine;\r\n    }\r\n  });\r\n  const sortByName = (wines) => {\r\n    wines.sort((a, b) => (a.name > b.name ? 1 : -1));\r\n    return wines;\r\n  };\r\n\r\n  const updateView = (wineid, wineName, wineGroup, qty) => {\r\n    let locObj = {};\r\n    locObj.winegroup = wineGroup;\r\n    locObj.wineid = wineid;\r\n    locObj.winename = wineName;\r\n    locObj.locations = props.locationArray;\r\n    locObj.qty = qty;\r\n    runUpdateView(locObj);\r\n  };\r\n\r\n  const runUpdateView = async (locObj) => {\r\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/locations/updateMany\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(locObj),\r\n    }).then(() => {\r\n      fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines/updateById\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          _id: locObj.wineid,\r\n          qty: locObj.locations.length + locObj.qty,\r\n        }),\r\n      }).then((data) => {\r\n        window.location.href = \"../Cellar\";\r\n      });\r\n    });\r\n  };\r\n  const takeWine = (wineid, locationId) => {\r\n    let locObj = {};\r\n    locObj._id = locationId;\r\n    locObj.wineid = \"\";\r\n    locObj.winename = \"\";\r\n    locObj.winegroup = \"\";\r\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/locations/update\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(locObj),\r\n    }).then((data) => {\r\n      fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines/take/\" + wineid, {\r\n        method: \"GET\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        // body: JSON.stringify(locObj),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines/update\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(data.obj[0]),\r\n          }).then((data) => {\r\n            window.location.href = \"../Cellar\";\r\n          });\r\n        });\r\n    });\r\n  };\r\n  const fetchData = () => {\r\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setWines(sortByName(data.obj));\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (!props.wineid || props.wineid === \"\") {\r\n    return (\r\n      <>\r\n        <Modal show={props.open} onHide={handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Sélectionner le vin</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div\r\n              style={{\r\n                backgroundColor: \"#fff \",\r\n                position: \"sticky \",\r\n                display: \"flex\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexGrow: 1,\r\n                  backgroundColor: \"#fff \",\r\n                }}\r\n              >\r\n                <Input\r\n                  id=\"wineName\"\r\n                  message=\"Nom du vin\"\r\n                  label=\"\"\r\n                  hasLabel=\"false\"\r\n                  handleChange={handleInputChange}\r\n                ></Input>\r\n              </div>\r\n              <div style={{ display: \"flex\", right: 0 }}>\r\n                <Select\r\n                  handleChange={filterRed}\r\n                  defaultValue={group}\r\n                  list=\"type\"\r\n                  name=\"type\"\r\n                />\r\n              </div>\r\n            </div>\r\n            {filteredWine.map((wine) => {\r\n              return (\r\n                <div\r\n                  className={\"list-item-container\"}\r\n                  onClick={() => {\r\n                    updateView(wine._id, wine.name, wine.group, wine.qty);\r\n                  }}\r\n                >\r\n                  <div className={\"\"}>\r\n                    {wine.name} {wine.millesime}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={handleClose}>\r\n              Save Changes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n  } else {\r\n    let currentWine = wines.find((obj) => {\r\n      return obj._id === props.wineid;\r\n    });\r\n    return (\r\n      <>\r\n        <Modal\r\n          show={props.open}\r\n          onHide={handleClose}\r\n          wineid={props.wineid}\r\n          winename={props.currentwine}\r\n          locationid={props.locationid}\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Votre choix</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div\r\n              className={\"wine-info-img\"}\r\n              style={{\r\n                backgroundImage: \"url(\" + currentWine.img + \")\",\r\n              }}\r\n            >\r\n              <div className={\"wine-info\"}>\r\n                {currentWine.name} {currentWine.millesime}\r\n                <br />\r\n                reste: {currentWine.qty}\r\n              </div>\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => {\r\n                takeWine(props.wineid, props.locationid);\r\n                handleClose();\r\n              }}\r\n            >\r\n              Prendre\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default WineDetail;\r\n",{"ruleId":"84","severity":1,"message":"85","line":22,"column":9,"nodeType":"86","messageId":"87","endLine":22,"endColumn":16},{"ruleId":"88","severity":1,"message":"89","line":159,"column":6,"nodeType":"90","endLine":159,"endColumn":8,"suggestions":"91"},{"ruleId":"92","severity":1,"message":"93","line":38,"column":44,"nodeType":"94","messageId":"95","endLine":38,"endColumn":46},{"ruleId":"88","severity":1,"message":"96","line":73,"column":6,"nodeType":"90","endLine":73,"endColumn":8,"suggestions":"97"},{"ruleId":"84","severity":1,"message":"98","line":3,"column":8,"nodeType":"86","messageId":"87","endLine":3,"endColumn":14},{"ruleId":"88","severity":1,"message":"96","line":89,"column":6,"nodeType":"90","endLine":89,"endColumn":8,"suggestions":"99"},{"ruleId":"92","severity":1,"message":"100","line":144,"column":34,"nodeType":"94","messageId":"95","endLine":144,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":163,"column":34,"nodeType":"94","messageId":"95","endLine":163,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":181,"column":34,"nodeType":"94","messageId":"95","endLine":181,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":202,"column":34,"nodeType":"94","messageId":"95","endLine":202,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":220,"column":34,"nodeType":"94","messageId":"95","endLine":220,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":244,"column":34,"nodeType":"94","messageId":"95","endLine":244,"endColumn":36},{"ruleId":"92","severity":1,"message":"100","line":267,"column":34,"nodeType":"94","messageId":"95","endLine":267,"endColumn":36},{"ruleId":"84","severity":1,"message":"101","line":9,"column":10,"nodeType":"86","messageId":"87","endLine":9,"endColumn":16},{"ruleId":"88","severity":1,"message":"96","line":41,"column":6,"nodeType":"90","endLine":41,"endColumn":8,"suggestions":"102"},{"ruleId":"84","severity":1,"message":"103","line":13,"column":7,"nodeType":"86","messageId":"87","endLine":13,"endColumn":18},{"ruleId":"84","severity":1,"message":"104","line":21,"column":7,"nodeType":"86","messageId":"87","endLine":21,"endColumn":17},{"ruleId":"84","severity":1,"message":"105","line":32,"column":7,"nodeType":"86","messageId":"87","endLine":32,"endColumn":19},{"ruleId":"88","severity":1,"message":"106","line":46,"column":6,"nodeType":"90","endLine":46,"endColumn":8,"suggestions":"107"},{"ruleId":"92","severity":1,"message":"93","line":31,"column":44,"nodeType":"94","messageId":"95","endLine":31,"endColumn":46},{"ruleId":"88","severity":1,"message":"96","line":114,"column":6,"nodeType":"90","endLine":114,"endColumn":8,"suggestions":"108"},"no-unused-vars","'forward' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'displayButtons' and 'fetchData'. Either include them or remove the dependency array.","ArrayExpression",["109"],"array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.",["110"],"'styles' is defined but never used.",["111"],"Array.prototype.map() expects a value to be returned at the end of arrow function.","'inputs' is assigned a value but never used.",["112"],"'handleClear' is assigned a value but never used.","'handlePlus' is assigned a value but never used.","'handleRemove' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'props.value'. Either include it or remove the dependency array. If 'setInput' needs the current value of 'props.value', you can also switch to useReducer instead of useState and read 'props.value' in the reducer.",["113"],["114"],{"desc":"115","fix":"116"},{"desc":"117","fix":"118"},{"desc":"117","fix":"119"},{"desc":"117","fix":"120"},{"desc":"121","fix":"122"},{"desc":"117","fix":"123"},"Update the dependencies array to be: [displayButtons, fetchData]",{"range":"124","text":"125"},"Update the dependencies array to be: [fetchData]",{"range":"126","text":"127"},{"range":"128","text":"127"},{"range":"129","text":"127"},"Update the dependencies array to be: [props.value]",{"range":"130","text":"131"},{"range":"132","text":"127"},[4433,4435],"[displayButtons, fetchData]",[2162,2164],"[fetchData]",[2921,2923],[1220,1222],[1139,1141],"[props.value]",[3543,3545]]