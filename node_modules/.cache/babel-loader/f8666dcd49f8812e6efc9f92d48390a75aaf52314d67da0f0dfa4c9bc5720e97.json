{"ast":null,"code":"import _slicedToArray from\"/Users/richardgaumond/www/vinoveritas/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Input from\"../Form/Input\";import Select from\"../Form/Select\";//type WineObj = { id_: String, name: string }[];\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var groups=[{id_:0,name:\"Rouge\"},{id_:1,name:\"Blanc\"},{id_:2,name:\"Rosé\"},{id_:3,name:\"Mousseux\"},{id_:4,name:\"Champagne\"}];var WineList=function WineList(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchValue=_useState2[0],setSearchValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),wines=_useState4[0],setWines=_useState4[1];var _React$useState=React.useState(\"Rouge\"),_React$useState2=_slicedToArray(_React$useState,2),wineGroup=_React$useState2[0],setWineGroup=_React$useState2[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),dataIsReturned=_useState6[0],setDataReturned=_useState6[1];// const [group, setGroup] = useState(\"Rouge\");\nvar handleInputChange=function handleInputChange(event){setSearchValue(event.target.value);};var sortByMillesime=function sortByMillesime(wines){wines.sort(function(a,b){return a.millesime>b.millesime?1:-1;});return wines;};var filteredWine=wines.filter(function(wine){if(searchValue===\"\"&&wine.group===wineGroup){// let result = wines.find((a) => a.group === wineGroup);\nreturn wine;}else{if(wine.name.toLowerCase().includes(searchValue.toLowerCase())&&wine.group===wineGroup)return wine;}});var fetchData=function fetchData(){return fetch(process.env.REACT_APP_ENPOINT_URL+\"/wines\").then(function(response){return response.json();}).then(function(data){setWines(sortByMillesime(data.obj));setDataReturned(true);});};var filterRed=function filterRed(e){setWineGroup(e.target.value);// setGroup(e.target.value);\nsetSearchValue(searchValue);};var editWine=function editWine(id){window.location.href=\"./Capture/\"+id;};//Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\nuseEffect(function(){fetchData();},[]);if(dataIsReturned){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#fff \",position:\"sticky \",display:\"flex\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexGrow:1,backgroundColor:\"#fff \"},children:/*#__PURE__*/_jsx(Input,{id:\"wineName\",message:\"Nom du vin\",label:\"\",hasLabel:\"false\",handleChange:handleInputChange})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",right:0},children:/*#__PURE__*/_jsx(Select,{handleChange:filterRed,list:\"type\",name:\"Type\"})})]}),filteredWine.map(function(wine){return/*#__PURE__*/_jsx(\"div\",{className:\"list-item-container\",onClick:function onClick(){editWine(wine._id);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[wine.name,\" \",wine.millesime,\" (\",wine.qty,\")\"]})});})]});}};export default WineList;","map":{"version":3,"names":["React","useState","useEffect","Input","Select","groups","id_","name","WineList","props","searchValue","setSearchValue","wines","setWines","wineGroup","setWineGroup","dataIsReturned","setDataReturned","handleInputChange","event","target","value","sortByMillesime","sort","a","b","millesime","filteredWine","filter","wine","group","toLowerCase","includes","fetchData","fetch","process","env","REACT_APP_ENPOINT_URL","then","response","json","data","obj","filterRed","e","editWine","id","window","location","href","backgroundColor","position","display","width","flexGrow","right","map","_id","qty"],"sources":["/Users/richardgaumond/www/vinoveritas/src/components/Lists/WineList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Input from \"../Form/Input\";\nimport Select from \"../Form/Select\";\n\n//type WineObj = { id_: String, name: string }[];\nconst groups = [\n  { id_: 0, name: \"Rouge\" },\n  { id_: 1, name: \"Blanc\" },\n  { id_: 2, name: \"Rosé\" },\n  { id_: 3, name: \"Mousseux\" },\n  { id_: 4, name: \"Champagne\" },\n];\n\nconst WineList = (props) => {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [wines, setWines] = useState([]);\n  const [wineGroup, setWineGroup] = React.useState(\"Rouge\");\n  const [dataIsReturned, setDataReturned] = useState(false);\n  // const [group, setGroup] = useState(\"Rouge\");\n\n  const handleInputChange = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  const sortByMillesime = (wines) => {\n    wines.sort((a, b) => (a.millesime > b.millesime ? 1 : -1));\n    return wines;\n  };\n\n  const filteredWine = wines.filter((wine) => {\n    if (searchValue === \"\" && wine.group === wineGroup) {\n      // let result = wines.find((a) => a.group === wineGroup);\n      return wine;\n    } else {\n      if (\n        wine.name.toLowerCase().includes(searchValue.toLowerCase()) &&\n        wine.group === wineGroup\n      )\n        return wine;\n    }\n  });\n\n  const fetchData = () => {\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\")\n      .then((response) => response.json())\n      .then((data) => {\n        setWines(sortByMillesime(data.obj));\n        setDataReturned(true);\n      });\n  };\n\n  const filterRed = (e) => {\n    setWineGroup(e.target.value);\n    // setGroup(e.target.value);\n    setSearchValue(searchValue);\n  };\n\n  const editWine = (id) => {\n    window.location.href = \"./Capture/\" + id;\n  };\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (dataIsReturned) {\n    return (\n      <>\n        <div\n          style={{\n            backgroundColor: \"#fff \",\n            position: \"sticky \",\n            display: \"flex\",\n            width: \"100%\",\n          }}\n        >\n          <div\n            style={{ display: \"flex\", flexGrow: 1, backgroundColor: \"#fff \" }}\n          >\n            <Input\n              id=\"wineName\"\n              message=\"Nom du vin\"\n              label=\"\"\n              hasLabel=\"false\"\n              handleChange={handleInputChange}\n            ></Input>\n          </div>\n          <div style={{ display: \"flex\", right: 0 }}>\n            <Select handleChange={filterRed} list=\"type\" name=\"Type\" />\n          </div>\n        </div>\n\n        {filteredWine.map((wine) => {\n          return (\n            <div\n              className={\"list-item-container\"}\n              onClick={() => {\n                editWine(wine._id);\n              }}\n            >\n              <div className={\"\"}>\n                {wine.name} {wine.millesime} ({wine.qty})\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n};\n\nexport default WineList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}