{"ast":null,"code":"var _jsxFileName = \"/Users/richardgaumond/www/vinoveritas/src/components/Lists/WineList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Input from \"../Form/Input\";\nimport Select from \"../Form/Select\";\n\n//type WineObj = { id_: String, name: string }[];\n// const groups = [\n//   { id_: 0, name: \"Rouge\" },\n//   { id_: 1, name: \"Blanc\" },\n//   { id_: 2, name: \"Rosé\" },\n//   { id_: 3, name: \"Mousseux\" },\n//   { id_: 4, name: \"Champagne\" },\n//   { id_: 4, name: \"All\" },\n// ];\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WineList = props => {\n  _s();\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [wines, setWines] = useState([]);\n  const [wineGroup, setWineGroup] = React.useState(\"All\");\n  const [dataIsReturned, setDataReturned] = useState(false);\n  const [group, setGroup] = useState(\"All\");\n  const handleInputChange = event => {\n    setSearchValue(event.target.value);\n  };\n  const sortByMillesime = wines => {\n    //if (params.wineid)\n    const filtered = wines.filter(inStock);\n    filtered.sort((a, b) => a.millesime > b.millesime ? 1 : -1);\n    return filtered;\n  };\n  const inStock = wines => {\n    return wines.qty > 0;\n  };\n  const filteredWine = wines.filter(wine => {\n    if (searchValue === \"\") {\n      if (wineGroup === \"All\") return wine;else if (wine.group === wineGroup) return wine;\n    } else {\n      if (wine.name.toLowerCase().includes(searchValue.toLowerCase()) && wine.group === wineGroup) return wine;\n    }\n  });\n  const fetchData = () => {\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\").then(response => response.json()).then(data => {\n      setWines(sortByMillesime(data.obj));\n      setDataReturned(true);\n    });\n  };\n  const filterRed = e => {\n    setWineGroup(e.target.value);\n    // setGroup(e.target.value);\n    setSearchValue(searchValue);\n    setGroup(e.target.value);\n  };\n  const editWine = id => {\n    window.location.href = \"./Capture/\" + id;\n  };\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\n  useEffect(() => {\n    fetchData();\n  }, []);\n  if (dataIsReturned) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: \"#fff \",\n          position: \"sticky \",\n          display: \"flex\",\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexGrow: 1,\n            backgroundColor: \"#fff \"\n          },\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"wineName\",\n            message: \"Nom du vin\",\n            label: \"\",\n            hasLabel: \"false\",\n            handleChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            right: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            handleChange: filterRed,\n            defaultValue: group,\n            list: \"type\",\n            name: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), filteredWine.map(wine => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list-item-container\",\n          onClick: () => {\n            editWine(wine._id);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [wine.name, \" \", wine.millesime, \" (\", wine.qty, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true);\n  }\n};\n_s(WineList, \"FlF8k7sfloNroYsb6w2P6dfxlvI=\");\n_c = WineList;\nexport default WineList;\nvar _c;\n$RefreshReg$(_c, \"WineList\");","map":{"version":3,"names":["React","useState","useEffect","Input","Select","WineList","props","searchValue","setSearchValue","wines","setWines","wineGroup","setWineGroup","dataIsReturned","setDataReturned","group","setGroup","handleInputChange","event","target","value","sortByMillesime","filtered","filter","inStock","sort","a","b","millesime","qty","filteredWine","wine","name","toLowerCase","includes","fetchData","fetch","process","env","REACT_APP_ENPOINT_URL","then","response","json","data","obj","filterRed","e","editWine","id","window","location","href","backgroundColor","position","display","width","flexGrow","right","map","_id"],"sources":["/Users/richardgaumond/www/vinoveritas/src/components/Lists/WineList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Input from \"../Form/Input\";\nimport Select from \"../Form/Select\";\n\n//type WineObj = { id_: String, name: string }[];\n// const groups = [\n//   { id_: 0, name: \"Rouge\" },\n//   { id_: 1, name: \"Blanc\" },\n//   { id_: 2, name: \"Rosé\" },\n//   { id_: 3, name: \"Mousseux\" },\n//   { id_: 4, name: \"Champagne\" },\n//   { id_: 4, name: \"All\" },\n// ];\n\nconst WineList = (props) => {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [wines, setWines] = useState([]);\n  const [wineGroup, setWineGroup] = React.useState(\"All\");\n  const [dataIsReturned, setDataReturned] = useState(false);\n  const [group, setGroup] = useState(\"All\");\n\n  const handleInputChange = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  const sortByMillesime = (wines) => {\n    //if (params.wineid)\n    const filtered = wines.filter(inStock);\n\n    filtered.sort((a, b) => (a.millesime > b.millesime ? 1 : -1));\n    return filtered;\n  };\n\n  const inStock = (wines) => {\n    return wines.qty > 0;\n  };\n\n  const filteredWine = wines.filter((wine) => {\n    if (searchValue === \"\") {\n      if (wineGroup === \"All\") return wine;\n      else if (wine.group === wineGroup) return wine;\n    } else {\n      if (\n        wine.name.toLowerCase().includes(searchValue.toLowerCase()) &&\n        wine.group === wineGroup\n      )\n        return wine;\n    }\n  });\n\n  const fetchData = () => {\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\")\n      .then((response) => response.json())\n      .then((data) => {\n        setWines(sortByMillesime(data.obj));\n        setDataReturned(true);\n      });\n  };\n\n  const filterRed = (e) => {\n    setWineGroup(e.target.value);\n    // setGroup(e.target.value);\n    setSearchValue(searchValue);\n    setGroup(e.target.value);\n  };\n\n  const editWine = (id) => {\n    window.location.href = \"./Capture/\" + id;\n  };\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (dataIsReturned) {\n    return (\n      <>\n        <div\n          style={{\n            backgroundColor: \"#fff \",\n            position: \"sticky \",\n            display: \"flex\",\n            width: \"100%\",\n          }}\n        >\n          <div\n            style={{ display: \"flex\", flexGrow: 1, backgroundColor: \"#fff \" }}\n          >\n            <Input\n              id=\"wineName\"\n              message=\"Nom du vin\"\n              label=\"\"\n              hasLabel=\"false\"\n              handleChange={handleInputChange}\n            ></Input>\n          </div>\n          <div style={{ display: \"flex\", right: 0 }}>\n            <Select\n              handleChange={filterRed}\n              defaultValue={group}\n              list=\"type\"\n              name=\"Type\"\n            />\n          </div>\n        </div>\n\n        {filteredWine.map((wine) => {\n          return (\n            <div\n              className={\"list-item-container\"}\n              onClick={() => {\n                editWine(wine._id);\n              }}\n            >\n              <div className={\"\"}>\n                {wine.name} {wine.millesime} ({wine.qty})\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n};\n\nexport default WineList;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,eAAe;AACjC,OAAOC,MAAM,MAAM,gBAAgB;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA,MAAMC,QAAQ,GAAIC,KAAK,IAAK;EAAA;EAC1B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGZ,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACY,cAAc,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAEzC,MAAMgB,iBAAiB,GAAIC,KAAK,IAAK;IACnCV,cAAc,CAACU,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EACpC,CAAC;EAED,MAAMC,eAAe,GAAIZ,KAAK,IAAK;IACjC;IACA,MAAMa,QAAQ,GAAGb,KAAK,CAACc,MAAM,CAACC,OAAO,CAAC;IAEtCF,QAAQ,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAMD,CAAC,CAACE,SAAS,GAAGD,CAAC,CAACC,SAAS,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC;IAC7D,OAAON,QAAQ;EACjB,CAAC;EAED,MAAME,OAAO,GAAIf,KAAK,IAAK;IACzB,OAAOA,KAAK,CAACoB,GAAG,GAAG,CAAC;EACtB,CAAC;EAED,MAAMC,YAAY,GAAGrB,KAAK,CAACc,MAAM,CAAEQ,IAAI,IAAK;IAC1C,IAAIxB,WAAW,KAAK,EAAE,EAAE;MACtB,IAAII,SAAS,KAAK,KAAK,EAAE,OAAOoB,IAAI,CAAC,KAChC,IAAIA,IAAI,CAAChB,KAAK,KAAKJ,SAAS,EAAE,OAAOoB,IAAI;IAChD,CAAC,MAAM;MACL,IACEA,IAAI,CAACC,IAAI,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC3B,WAAW,CAAC0B,WAAW,EAAE,CAAC,IAC3DF,IAAI,CAAChB,KAAK,KAAKJ,SAAS,EAExB,OAAOoB,IAAI;IACf;EACF,CAAC,CAAC;EAEF,MAAMI,SAAS,GAAG,MAAM;IACtB,OAAOC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,qBAAqB,GAAG,QAAQ,CAAC,CACvDC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;MACdjC,QAAQ,CAACW,eAAe,CAACsB,IAAI,CAACC,GAAG,CAAC,CAAC;MACnC9B,eAAe,CAAC,IAAI,CAAC;IACvB,CAAC,CAAC;EACN,CAAC;EAED,MAAM+B,SAAS,GAAIC,CAAC,IAAK;IACvBlC,YAAY,CAACkC,CAAC,CAAC3B,MAAM,CAACC,KAAK,CAAC;IAC5B;IACAZ,cAAc,CAACD,WAAW,CAAC;IAC3BS,QAAQ,CAAC8B,CAAC,CAAC3B,MAAM,CAACC,KAAK,CAAC;EAC1B,CAAC;EAED,MAAM2B,QAAQ,GAAIC,EAAE,IAAK;IACvBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY,GAAGH,EAAE;EAC1C,CAAC;EACD;EACA9C,SAAS,CAAC,MAAM;IACdiC,SAAS,EAAE;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,IAAItB,cAAc,EAAE;IAClB,oBACE;MAAA,wBACE;QACE,KAAK,EAAE;UACLuC,eAAe,EAAE,OAAO;UACxBC,QAAQ,EAAE,SAAS;UACnBC,OAAO,EAAE,MAAM;UACfC,KAAK,EAAE;QACT,CAAE;QAAA,wBAEF;UACE,KAAK,EAAE;YAAED,OAAO,EAAE,MAAM;YAAEE,QAAQ,EAAE,CAAC;YAAEJ,eAAe,EAAE;UAAQ,CAAE;UAAA,uBAElE,QAAC,KAAK;YACJ,EAAE,EAAC,UAAU;YACb,OAAO,EAAC,YAAY;YACpB,KAAK,EAAC,EAAE;YACR,QAAQ,EAAC,OAAO;YAChB,YAAY,EAAEnC;UAAkB;YAAA;YAAA;YAAA;UAAA;QACzB;UAAA;UAAA;UAAA;QAAA,QACL,eACN;UAAK,KAAK,EAAE;YAAEqC,OAAO,EAAE,MAAM;YAAEG,KAAK,EAAE;UAAE,CAAE;UAAA,uBACxC,QAAC,MAAM;YACL,YAAY,EAAEZ,SAAU;YACxB,YAAY,EAAE9B,KAAM;YACpB,IAAI,EAAC,MAAM;YACX,IAAI,EAAC;UAAM;YAAA;YAAA;YAAA;UAAA;QACX;UAAA;UAAA;UAAA;QAAA,QACE;MAAA;QAAA;QAAA;QAAA;MAAA,QACF,EAELe,YAAY,CAAC4B,GAAG,CAAE3B,IAAI,IAAK;QAC1B,oBACE;UACE,SAAS,EAAE,qBAAsB;UACjC,OAAO,EAAE,MAAM;YACbgB,QAAQ,CAAChB,IAAI,CAAC4B,GAAG,CAAC;UACpB,CAAE;UAAA,uBAEF;YAAK,SAAS,EAAE,EAAG;YAAA,WAChB5B,IAAI,CAACC,IAAI,EAAC,GAAC,EAACD,IAAI,CAACH,SAAS,EAAC,IAAE,EAACG,IAAI,CAACF,GAAG,EAAC,GAC1C;UAAA;YAAA;YAAA;YAAA;UAAA;QAAM;UAAA;UAAA;UAAA;QAAA,QACF;MAEV,CAAC,CAAC;IAAA,gBACD;EAEP;AACF,CAAC;AAAC,GA7GIxB,QAAQ;AAAA,KAARA,QAAQ;AA+Gd,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}