{"ast":null,"code":"var _jsxFileName = \"/Users/richardgaumond/www/vinoveritas/src/components/Lists/WineList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Input from \"../Form/Input\";\nimport Select from \"../Form/Select\";\nimport { useParams } from \"react-router-dom\";\n\n//type WineObj = { id_: String, name: string }[];\n// const groups = [\n//   { id_: 0, name: \"Rouge\" },\n//   { id_: 1, name: \"Blanc\" },\n//   { id_: 2, name: \"Rosé\" },\n//   { id_: 3, name: \"Mousseux\" },\n//   { id_: 4, name: \"Champagne\" },\n// ];\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WineList = props => {\n  _s();\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [wines, setWines] = useState([]);\n  const [wineGroup, setWineGroup] = React.useState(\"Rouge\");\n  const [dataIsReturned, setDataReturned] = useState(false);\n  const params = useParams();\n  const handleInputChange = event => {\n    setSearchValue(event.target.value);\n  };\n  const sortByMillesime = wines => {\n    //if (params.wineid)\n    const filtered = wines.filter(inStock);\n    wines.sort((a, b) => a.millesime > b.millesime ? 1 : -1);\n    return wines;\n  };\n  const inStock = wines => {\n    return wines.qty > 0;\n  };\n  const filteredWine = wines.filter(wine => {\n    if (searchValue === \"\" && wine.group === wineGroup) {\n      // let result = wines.find((a) => a.group === wineGroup);\n      return wine;\n    } else {\n      if (wine.name.toLowerCase().includes(searchValue.toLowerCase()) && wine.group === wineGroup) return wine;\n    }\n  });\n  const fetchData = () => {\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\").then(response => response.json()).then(data => {\n      setWines(sortByMillesime(data.obj));\n      setDataReturned(true);\n    });\n  };\n  const filterRed = e => {\n    setWineGroup(e.target.value);\n    // setGroup(e.target.value);\n    setSearchValue(searchValue);\n  };\n  const editWine = id => {\n    window.location.href = \"./Capture/\" + id;\n  };\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\n  useEffect(() => {\n    fetchData();\n  }, []);\n  if (dataIsReturned) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: \"#fff \",\n          position: \"sticky \",\n          display: \"flex\",\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexGrow: 1,\n            backgroundColor: \"#fff \"\n          },\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"wineName\",\n            message: \"Nom du vin\",\n            label: \"\",\n            hasLabel: \"false\",\n            handleChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            right: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            handleChange: filterRed,\n            list: \"type\",\n            name: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), filteredWine.map(wine => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list-item-container\",\n          onClick: () => {\n            editWine(wine._id);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [wine.name, \" \", wine.millesime, \" (\", wine.qty, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true);\n  }\n};\n_s(WineList, \"N0x55SEhT7f9VY4w/o+BBbryqXg=\", false, function () {\n  return [useParams];\n});\n_c = WineList;\nexport default WineList;\nvar _c;\n$RefreshReg$(_c, \"WineList\");","map":{"version":3,"names":["React","useState","useEffect","Input","Select","useParams","WineList","props","searchValue","setSearchValue","wines","setWines","wineGroup","setWineGroup","dataIsReturned","setDataReturned","params","handleInputChange","event","target","value","sortByMillesime","filtered","filter","inStock","sort","a","b","millesime","qty","filteredWine","wine","group","name","toLowerCase","includes","fetchData","fetch","process","env","REACT_APP_ENPOINT_URL","then","response","json","data","obj","filterRed","e","editWine","id","window","location","href","backgroundColor","position","display","width","flexGrow","right","map","_id"],"sources":["/Users/richardgaumond/www/vinoveritas/src/components/Lists/WineList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Input from \"../Form/Input\";\nimport Select from \"../Form/Select\";\nimport { useParams } from \"react-router-dom\";\n\n//type WineObj = { id_: String, name: string }[];\n// const groups = [\n//   { id_: 0, name: \"Rouge\" },\n//   { id_: 1, name: \"Blanc\" },\n//   { id_: 2, name: \"Rosé\" },\n//   { id_: 3, name: \"Mousseux\" },\n//   { id_: 4, name: \"Champagne\" },\n// ];\n\nconst WineList = (props) => {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [wines, setWines] = useState([]);\n  const [wineGroup, setWineGroup] = React.useState(\"Rouge\");\n  const [dataIsReturned, setDataReturned] = useState(false);\n  const params = useParams();\n\n  const handleInputChange = (event) => {\n    setSearchValue(event.target.value);\n  };\n\n  const sortByMillesime = (wines) => {\n    //if (params.wineid)\n    const filtered = wines.filter(inStock);\n\n    wines.sort((a, b) => (a.millesime > b.millesime ? 1 : -1));\n    return wines;\n  };\n  const inStock = (wines) => {\n    return wines.qty > 0;\n  };\n  const filteredWine = wines.filter((wine) => {\n    if (searchValue === \"\" && wine.group === wineGroup) {\n      // let result = wines.find((a) => a.group === wineGroup);\n      return wine;\n    } else {\n      if (\n        wine.name.toLowerCase().includes(searchValue.toLowerCase()) &&\n        wine.group === wineGroup\n      )\n        return wine;\n    }\n  });\n\n  const fetchData = () => {\n    return fetch(process.env.REACT_APP_ENPOINT_URL + \"/wines\")\n      .then((response) => response.json())\n      .then((data) => {\n        setWines(sortByMillesime(data.obj));\n        setDataReturned(true);\n      });\n  };\n\n  const filterRed = (e) => {\n    setWineGroup(e.target.value);\n    // setGroup(e.target.value);\n    setSearchValue(searchValue);\n  };\n\n  const editWine = (id) => {\n    window.location.href = \"./Capture/\" + id;\n  };\n  //Called once after the render (component is mounted) - the array is the dependency array basically the parameters which trigger the function is they are changed\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (dataIsReturned) {\n    return (\n      <>\n        <div\n          style={{\n            backgroundColor: \"#fff \",\n            position: \"sticky \",\n            display: \"flex\",\n            width: \"100%\",\n          }}\n        >\n          <div\n            style={{ display: \"flex\", flexGrow: 1, backgroundColor: \"#fff \" }}\n          >\n            <Input\n              id=\"wineName\"\n              message=\"Nom du vin\"\n              label=\"\"\n              hasLabel=\"false\"\n              handleChange={handleInputChange}\n            ></Input>\n          </div>\n          <div style={{ display: \"flex\", right: 0 }}>\n            <Select handleChange={filterRed} list=\"type\" name=\"Type\" />\n          </div>\n        </div>\n\n        {filteredWine.map((wine) => {\n          return (\n            <div\n              className={\"list-item-container\"}\n              onClick={() => {\n                editWine(wine._id);\n              }}\n            >\n              <div className={\"\"}>\n                {wine.name} {wine.millesime} ({wine.qty})\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n};\n\nexport default WineList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}